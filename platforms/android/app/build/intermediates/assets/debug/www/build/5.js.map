{"version":3,"sources":["../../src/pages/mis-reservas/mis-reservas.module.ts","../../src/pipes/pipes.module.ts","../../src/pipes/filtrofav/filtrofav.ts","../../src/pages/mis-reservas/mis-reservas.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MisReservasPage } from './mis-reservas';\nimport { PipesModule } from '../../pipes/pipes.module';//<--- here\n\n@NgModule({\n  declarations: [\n    MisReservasPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MisReservasPage),\n    PipesModule\n  ],\n})\nexport class MisReservasPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mis-reservas/mis-reservas.module.ts","import { NgModule } from '@angular/core';\nimport { FiltrofavPipe } from './filtrofav/filtrofav';\n@NgModule({\n\tdeclarations: [FiltrofavPipe],\n\timports: [],\n\texports: [FiltrofavPipe]\n})\nexport class PipesModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the FiltrofavPipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'filtrofav',\n  pure: false\n})\nexport class FiltrofavPipe implements PipeTransform {\n   transform(items: any[], callback: (item: any) => boolean): any {\n        if (!items || !callback) {\n            return items;\n        }\n        return items.filter(item => callback(item));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/filtrofav/filtrofav.ts","import { Component, NgZone } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AlertController } from 'ionic-angular';\nimport { ModalController } from 'ionic-angular';\nimport { LoadingController } from 'ionic-angular';\nimport { Events } from 'ionic-angular';\nimport { ApiProvider } from '../../providers/api/api';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nimport * as moment from 'moment';\n\n\n/**\n * Generated class for the MisReservasPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-mis-reservas',\n  templateUrl: 'mis-reservas.html',\n})\nexport class MisReservasPage {\n\n  reservas;\n  dataCita;\n  horaSeleccionada;\n  horaFinalizacion;\n  fechaCalendario;\n  servicios;\n  horario;\n  section;\n  dataUser;\n\n  constructor(public navCtrl: NavController,private DomSanitizer: DomSanitizer, public navParams: NavParams, public modalCtrl: ModalController,  public alertCtrl: AlertController, public loadingCtrl: LoadingController,public events: Events, public apiProvider: ApiProvider, public zone: NgZone) {\n   this.reservas=[];   \n\n  }\n\n\n  repetirReserva($event, idCita) {\n    $event.stopPropagation();   \n    let dataE = {idCita:idCita};\n    this.apiProvider.getDataCita(dataE)\n      .then(data => {\n       console.log(data);\n              if(data){\n\n                    this.zone.run(()=>{ \n\n\n\n        this.dataCita = data['cita'][0] || [];\n\n        this.horaSeleccionada = this.dataCita.horaInicio;\n         this.horaFinalizacion = this.dataCita.horaFinalEsperado;\n          this.fechaCalendario = this.dataCita.horaInicio;\n        \n         this.servicios = data['servicios'] || [];\n               this.horario = data['horario'];\n               this.apiProvider.vaciarCarrito().then(() => {\n                if(this.servicios.length > 0)\n                  this.addServicio(0); \n               })\n       }); \n\n       }\n       else{\n\n       console.log('Ha ocurrido un error');\n       this.reintentarAlert(this.ionViewDidEnter.bind(this));\n\n       } \n      })\n    //\n  }\n  addServicio(index) {\n    let servicio = this.servicios[index];\n    this.apiProvider.addProducto({\n      duracion: servicio.duracion,\n      idCategoria: servicio.idCategoria,\n      idServicio: servicio.idServicio,\n      idSubcategoria: 0,\n      imagenCategoria: '',\n      nombre: servicio.nombre,\n      nombreCategoria: servicio.nombreCategoria,\n      nombreSubcategoria: '',\n      oferta: null,\n      precio: servicio.precio,\n      precioFinal: servicio.precioCobrado\n    }).then(() => {\n      if(index + 1 < this.servicios.length)\n        this.addServicio(index+1);\n      else\n        this.navCtrl.push('ReservaPage', {idCentro: this.dataCita.idCentro});\n    })\n  }\n\n\n  //ionViewDidLoad() {\n  ionViewDidEnter() {\n    this.section=\"one\";\n    console.log('ionViedLoad MisReservasPage');\n\n        this.apiProvider.verificarLogin()\n    .then(data => { \n\n      console.log(data);\n\n      if(data){\n\n      this.dataUser = data;\n      this.getReservas();\n      //this.menuActivo = true;\n      }\n      else{\n      console.log('error');\n      // this.menuActivo = false;\n      } \n      \n      \n     });\n\n\n  }\n\n    filterFav(user: any) {\n  //console.log(user);\n    return (user.estado == 1 || user.estado == 2 || user.estado == 5 \n    || user.estado == 4) && !user.passed\n  }\n\n    filterFav2(user: any) {\n  //console.log(user);\n    return user.estado == 7 || ((user.estado == 1 || user.estado == 2 || user.estado == 5 \n      || user.estado == 4) && user.passed)\n  }\n\n  filterFav3(user: any) {\n    //console.log(user);\n      return user.estado == 3\n    }\n\n\n      goDetalle(idCita) {\n\n\n     //this.navCtrl.push('DetalleReservaPage');\n\n       this.navCtrl.push('DetalleReservaPage', {idCita:idCita});\n\n\n  \n      \n  }\n\n\n  getMes(fecha){\n    var date = new Date(fecha),\n    locale = \"es-es\",\n    month = date.toLocaleString(locale, { month: \"short\" });\n    return month;\n  }\n\n  getDia(fecha){\n\n    var date = new Date(fecha),\n    day = date.getDate();\n    return day; \n\n  }\n\n  getHora(fecha){\n\n    var date = new Date(fecha),\n    hora = date.getHours(),\n    min = date.getMinutes();\n    return (\"0\" + hora).slice(-2)+':'+(\"0\" + min).slice(-2); \n\n\n  }\n\ngetDattt(str){\nif(str){\n \n  return moment.utc(str).format('h:mm a')\n\n}\nelse{return ' '}\n\n}\n\n\ngetNumMen(n){\n  var num = parseInt(n);\n  if(num > 1){\n  return num - 1;\n  }\n  else{return num;}\n}\n  getReservas(){\n\n    let loading = this.loadingCtrl.create({content : \"Cargando\"});\n    loading.present();\n\n\n        this.apiProvider.reservasUser({idCliente:this.dataUser.idCliente})\n      .then(data => {\n\n\n       console.log(data);\n              if(data){\n        this.reservas = data || [];\n       }\n       else{\n       console.log('Ha ocurrido un error');\n       this.reintentarAlert(this.ionViewDidEnter.bind(this));\n       }\n\n       loading.dismiss();\n\n       \n      });\n\n  }\n\n  reintentarAlert(funcionEnviar){\n\n    var mensaje = `<div>  \n                      <p>No hemos podido conectar. \n                      Verifica tu conexión a Internet para continuar</p>\n                      \n                   <div>`;\n    let alert = this.alertCtrl.create({\n      title: 'Error de conexión',\n      subTitle: this.DomSanitizer.bypassSecurityTrustHtml(mensaje) as string,\n       buttons: [\n \n\n           {\n        text: 'Reintentar',\n        handler: () => {\n          funcionEnviar();\n        }\n      },\n    ],\n      enableBackdropDismiss: false\n    });\n    alert.present();\n\n  }\n\n  \n\n\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mis-reservas/mis-reservas.ts"],"sourceRoot":""}